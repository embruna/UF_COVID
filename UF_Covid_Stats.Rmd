---
title: "UF Covid Summary"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: pdf_document
# output: html_document
# header-includes:
#   - \usepackage{pdflscape}
#   - \newcommand{\blandscape}{\begin{landscape}}
#   - \newcommand{\elandscape}{\end{landscape}}
classoption: 
   - landscape
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(rvest)
library(RColorBrewer)
library(gridExtra)
```

## Data Source

The data used to generate these figures were extracted from [the UF Covid Dashboard](https://coronavirus.ufhealth.org/screen-test-protect-2/about-initiative/testing-dashboard/). All code and data can be found at [https://github.com/embruna/UF_COVID](https://github.com/embruna/UF_COVID).

## Important Caveats

1. Calculations of tests per day, positives per day, and positivity rate are based on the dates the data were *posted*. It is possible that data released on one day includes tests that were conducted over multiple days.

2. UF posts daily data on UF affiliated cases at http://www.ufl.edu/articles/2020/09/covid-data.html.
\newpage
```{r scrape, echo=FALSE,message = FALSE,warning=FALSE, cache=TRUE}
source("./code/scrape.R")
scrape<-scrape()
```

```{r bind, echo=FALSE,message = FALSE,warning=FALSE,cache=TRUE}
source("./code/UF_data_bind.R")
uf.data<-UF_data_bind()
```

```{r LoadData, echo=FALSE,message = FALSE,cache=TRUE}
#save as a csv file with the date 
todays.data<-paste("./data_clean/UFcovid_data_",Sys.Date(),".csv",sep="")
uf.data<-read.csv(todays.data)
uf.data$update_date<-as.Date(uf.data$update_date)
```
<!-- \newpage -->
<!-- ```{r facstaff, message=FALSE, warning=FALSE, echo=FALSE} -->
<!-- source("./code/facstaff_daily.R") -->
<!-- fs<-facstaff_daily(uf.data) -->
<!-- fs[1] -->
<!-- fs[2] -->
<!-- ``` -->

<!-- <!-- \newpage --> -->
<!-- ```{r student, message=FALSE, warning=FALSE, echo=FALSE,fig.height = 7,fig.width=10} -->
<!-- source("./code/student_daily.R") -->
<!-- s<-student_daily(uf.data) -->
<!-- s[1] -->
<!-- s[2] -->
<!-- ``` -->

<!-- \blandscape -->
```{r daily.pos.fig, message=FALSE, warning=FALSE, echo=FALSE,fig.height = 6.5,fig.width=10}
source("./code/UF.plot.daily.R")
UF.plot.daily(uf.data)
```
NB: The increase in faculty/staff due to 1 positive from 3 tests
\newpage
```{r daily.n.fig,message=FALSE,warning=FALSE,echo=FALSE,fig.height = 6.5,fig.width=10}
source("./code/UF.plot.daily.tests.R")
UF.plot.daily.tests(uf.data)
```
\newpage
```{r cumulative.pos.fig, message=FALSE,warning=FALSE,echo=FALSE,fig.height = 6.5,fig.width=10}
source("./code/UF.plot.cumul.pos.R")
UF.plot.cumul.pos(uf.data)
```
